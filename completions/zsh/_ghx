#compdef ghx

# ZSH completion for ghx (ghxgit CLI)

_ghx_complete() {
    local -a commands
    local -a git_commands
    
    commands=(
        'jump:Search and jump to a PR, issue, branch, or commit'
        'branch:Manage git branches'
        'push:Push commits with smart options'
        'pull:Pull changes from remote'
        'sync:Fetch and pull all changes'
        'status:Show git status'
        'log:Show recent commits'
    )
    
    git_commands=(
        'list:List all branches'
        'current:Show current branch'
        'switch:Switch to a branch'
        'delete:Delete a branch'
        'create:Create a new branch'
    )
    
    local context state line
    _arguments -C \
        '1: :->command' \
        '*:: :->args'
    
    case $state in
        command)
            _describe "ghx command" commands
            ;;
        args)
            case ${line[1]} in
                jump)
                    _arguments \
                        '--open[Open in browser]' \
                        '--checkout[Checkout branch]' \
                        '--type[Search type]:type:(pr issue branch commit)' \
                        '--verbose[Debug output]' \
                        '-v[Debug output]' \
                        '--help[Show help]'
                    ;;
                branch)
                    _arguments -C \
                        '1: :->subcommand'
                    
                    case $state in
                        subcommand)
                            _describe "branch subcommand" git_commands
                            ;;
                    esac
                    ;;
                push)
                    _arguments \
                        '--force[Force push (dangerous!)]' \
                        '--force-with-lease[Safe force push]' \
                        '-u[Set upstream]' \
                        '--no-verify[Skip pre-push hooks]'
                    ;;
                pull)
                    _arguments \
                        '--rebase[Pull with rebase]'
                    ;;
                status|log|sync)
                    _arguments \
                        '--help[Show help]'
                    ;;
                *)
                    _arguments \
                        '--help[Show help]' \
                        '--version[Show version]'
                    ;;
            esac
            ;;
    esac
}

_ghx_complete
